(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{450:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),i=n(56),s=n.n(i),r=(n(244),n(31)),o=n(32),d=n(34),l=n(33),h=n(142),u=n(14),j=n(464),g=n(463),b=n(107),p=n(36),m=n.n(p),x=n(76),O=n.n(x),C=n.p+"static/media/logo_regular.0709e572.png",v=n(457),f=n(238),k=n(458),S=n(3),y=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).sendSearchRangeChange=function(e){a.props.searchRangeChange(e)},a.sendDateRangeChange=function(e){a.props.dateRangeChange(e)},a.sendWordSearchChange=function(e){a.props.wordSearchChange(e)},a.sendIncludePoliceChange=function(e){a.props.includePoliceChange(e)},a.sendIncludeFireChange=function(e){a.props.includeFireChange(e)},a.sendIncludeAmbuChange=function(e){a.props.includeAmbuChange(e)},a.handleChange=function(e,t){a.props.handleChange(e,t)},a.handleFireChange=function(e){a.setState({checkboxFire:!a.state.checkboxFire}),a.sendIncludeFireChange(a.state.checkboxFire)},a.handlePolChange=function(e){a.setState({checkboxPol:!a.state.checkboxPol}),a.sendIncludePoliceChange(a.state.checkboxPol)},a.handleAmbuChange=function(e){a.setState({checkboxAmbu:!a.state.checkboxAmbu}),a.sendIncludeAmbuChange(a.state.checkboxAmbu)},a.state={checkboxFire:!0,checkboxPol:!0,checkboxAmbu:!0},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{children:["How big is the search area in km?",Object(S.jsx)(v.a,{progress:!0,min:.5,step:.5,max:20,defaultValue:1,onChange:function(t){console.log("radius "+t),e.sendSearchRangeChange(t),console.log(e.props.searchRanged)}}),Object(S.jsx)("br",{}),"Look back how many days?",Object(S.jsx)(v.a,{progress:!0,defaultValue:30,min:0,max:50,onChange:function(t){console.log("date range "+t),e.sendDateRangeChange(t),console.log(e.props.dateRanged)}}),Object(S.jsx)("br",{}),"Filter on other words/values",Object(S.jsx)(f.a,{placeholder:"ex. 'Brand'",onChange:function(t){e.sendWordSearchChange(t)}}),Object(S.jsx)("br",{}),Object(S.jsxs)(k.a,{checked:!!this.props.includeFire,onChange:this.handleFireChange,children:[" ","Brandweer"]}),Object(S.jsxs)(k.a,{checked:!!this.props.includePol,onChange:this.handlePolChange,children:[" ","Politie"]}),Object(S.jsxs)(k.a,{checked:!!this.props.includeAmbu,onChange:this.handleAmbuChange,children:[" ","Ambulance"]})]})}}]),n}(c.a.Component);O.a.accessToken="pk.eyJ1Ijoia2RlYnJhdXciLCJhIjoiY2p4ZnhyaTUzMDB1eTQxbnVwOG9jbHBwdSJ9.L5RCSfMVV7RYpq1a45E68g";class w extends c.a.Component{constructor(e){super(e),this.handleChange=e=>t=>{this.setState({...this.state,[e]:t.target.checked})},this.state={lng:5.8,lat:52,zoom:7,searchRange:1,dateRange:30,array:0,wordSearch:"",includeFire:!0,includePol:!0,includeAmbu:!0},this.handleDateRangeChange=this.handleDateRangeChange.bind(this),this.handleSearchRangeChange=this.handleSearchRangeChange.bind(this),this.handleWordSearchChange=this.handleWordSearchChange.bind(this),this.handleIncludePoliceChange=this.handleIncludePoliceChange.bind(this),this.handleIncludeFireChange=this.handleIncludeFireChange.bind(this),this.handleIncludeAmbuChange=this.handleIncludeAmbuChange.bind(this)}handleDateRangeChange(e){this.setState({dateRange:e})}handleSearchRangeChange(e){this.setState({searchRange:e})}handleWordSearchChange(e){this.setState({wordSearch:e})}handleIncludeFireChange(e){this.setState({includeFire:e}),console.log("fire new: "+e)}handleIncludePoliceChange(e){this.setState({includePol:e}),console.log("police new: "+e)}handleIncludeAmbuChange(e){this.setState({includeAmbu:e}),console.log("ambu new: "+e)}componentDidMount(){const e=new O.a.Map({container:this.mapContainer,style:"mapbox://styles/kdebrauw/ckaxjbuh50ohl1ioo470azefc",center:[this.state.lng,this.state.lat],zoom:this.state.zoom});function t(e){for(var t={type:"FeatureCollection",features:[]},n=Object.keys(e).length,a=0;a<n;a++)t.features.push({type:"Feature",geometry:{type:"Point",coordinates:[e[a].fields.longitude,e[a].fields.latitude]},properties:{monitorcode:e[a].fields.monitorcode,comment:e[a].fields.comment,emergency_service:e[a].fields.emergency_service,priority_code:e[a].fields.priority_code,region:e[a].fields.region,pub_date:e[a].fields.pub_date}});return t}e.on("move",(()=>{this.setState({lng:e.getCenter().lng.toFixed(4),lat:e.getCenter().lat.toFixed(4),zoom:e.getZoom().toFixed(2)})})),e.on("click",(a=>{const{lat:c,lng:i}=a.lngLat;new O.a.Popup({color:"#2A3C47"}).setLngLat(a.lngLat).setText("What happened here in the last "+this.state.dateRange+" days?").addTo(e),p.get("".concat("https://api.incidentradar.com","/scraper/api/location/"),{params:{dateRange:this.state.dateRange,"location-list":"SRID=4326;POINT(".concat(i," ").concat(c,")"),searchRange:this.state.searchRange,wordSearch:this.state.wordSearch,includePolice:this.state.includePol,includeFire:this.state.includeFire,includeAmbu:this.state.includeAmbu}}).then((a=>{this.results=a.data,console.log(t(a.data)),this.setState({array:this.results.length}),e.getSource("locaties")&&(e.removeLayer("locaties_waddan"),e.removeSource("locaties")),e.addSource("locaties",{type:"geojson",data:t(a.data)}),e.addLayer({id:"locaties_waddan",type:"circle",source:"locaties",paint:{"circle-radius":5,"circle-stroke-color":"#2A3C47","circle-stroke-width":1,"circle-color":["match",["get","emergency_service"],"ambu","#EFDC23","br","#D13620","pol","#2134BE","unknown","#3bb2d0","#3C3C3D"]}}),e.on("mouseenter","locaties_waddan",(function(t){e.getCanvas().style.cursor="pointer";var a=t.features[0].geometry.coordinates.slice(),c=t.features[0].properties.monitorcode,i=t.features[0].properties.comment,s=t.features[0].properties.emergency_service,r=t.features[0].properties.priority_code,o=t.features[0].properties.pub_date;console.log(c),n.setLngLat(a).setHTML("<H3> Incident </H3>"+o+"<br> <br> Prioriteit: "+r+"<br> Hulpdienst: "+s+"<br> <br> Bericht: "+i).addTo(e)})),e.on("mouseleave","locaties_waddan",(function(){e.getCanvas().style.cursor="",n.remove()}))}))}));var n=new O.a.Popup({closeButton:!1,closeOnClick:!1})}render(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{}),Object(S.jsxs)("div",{className:"dataHolder",children:[Object(S.jsx)("div",{children:Object(S.jsx)("img",{className:"logo_home",src:C,alt:"Logo Incidentradar"})}),Object(S.jsx)("div",{className:"introbarStyle",children:Object(S.jsx)("div",{children:"Click on the map to explore recent incidents in an area. "})}),Object(S.jsx)("div",{className:"hline"}),Object(S.jsx)("div",{className:"filterStyle",children:Object(S.jsx)(y,{searchRanged:this.state.searchRange,dateRanged:this.state.dateRange,handleChange:this.handleChange,searchRangeChange:this.handleSearchRangeChange,dateRangeChange:this.handleDateRangeChange,wordSearchChange:this.handleWordSearchChange,includePoliceChange:this.handleIncludePoliceChange,includeFireChange:this.handleIncludeFireChange,includeAmbuChange:this.handleIncludeAmbuChange,includeFire:this.state.includeFire,includePol:this.state.includePol,includeAmbu:this.state.includeAmbu})}),Object(S.jsxs)("div",{className:"sidebarStyle",children:[Object(S.jsxs)("div",{children:["Longitude: ",this.state.lng," | Latitude: ",this.state.lat," | Zoom:"," ",this.state.zoom]}),Object(S.jsxs)("div",{children:[" Your click returned ",this.state.array," results "]})]}),Object(S.jsx)("div",{className:"carthaBar",children:Object(S.jsx)("div",{children:"Designed and powered by Cartha"})})]}),Object(S.jsx)("div",{ref:e=>this.mapContainer=e,className:"mapContainer"})]})}}var R=w,I=n(456);m.a.interceptors.request.use((e=>(console.log(e),e))),m.a.interceptors.response.use((e=>(console.log(e),e)),(function(e){return Promise.reject(e)}));const{Column:_,HeaderCell:P,Cell:A,Pagination:L}=I.a;class F extends c.a.Component{constructor(){super(),this.renderRaise=this.renderRaise.bind(this),this.state={user:"",hits:[]}}async componentDidMount(){const e=await m.a.get("http://api.incidentradar.com/scraper/api/incidentHits/",{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}});this.results=e.data;const t=e.data;this.setState({hits:t})}renderRaise(e){const t=e>0,n=e<0;return Object(S.jsxs)("span",{style:{paddingLeft:15,color:n?"red":"green"},children:[Object(S.jsx)("span",{children:t?"+":null}),Object(S.jsx)("span",{children:e})]})}render(){return Object(S.jsx)("div",{children:Object(S.jsxs)(I.a,{virtualized:!0,height:400,data:this.state.hits,onRowClick:e=>{console.log(e)},children:[Object(S.jsxs)(_,{width:200,fixed:!0,children:[Object(S.jsx)(P,{children:"monitorcode"}),Object(S.jsx)(A,{dataKey:"monitorcode"})]}),Object(S.jsxs)(_,{width:200,children:[Object(S.jsx)(P,{children:"Hulpdienst"}),Object(S.jsx)(A,{dataKey:"emergency_service"})]})]})})}}var N=F;const{Column:D,HeaderCell:z,Cell:T,Pagination:H}=I.a;class W extends c.a.Component{constructor(){super(),this.state={clients:[]}}async componentDidMount(){const e=await m.a.get("http://api.incidentradar.com/scraper/api/clientLocationList/",{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}});this.results=e.data;const t=e.data;this.setState({clients:t}),console.log(t)}render(){return Object(S.jsx)("div",{children:Object(S.jsxs)(I.a,{height:400,data:this.state.clients,onRowClick:e=>{console.log(e)},children:[Object(S.jsxs)(D,{width:70,align:"center",fixed:!0,children:[Object(S.jsx)(z,{children:"Id"}),Object(S.jsx)(T,{dataKey:"id"})]}),Object(S.jsxs)(D,{width:200,fixed:!0,children:[Object(S.jsx)(z,{children:"Client Name"}),Object(S.jsx)(T,{dataKey:"name"})]}),Object(S.jsxs)(D,{width:200,children:[Object(S.jsx)(z,{children:"Address"}),Object(S.jsx)(T,{dataKey:"address"})]}),Object(S.jsxs)(D,{width:120,fixed:"right",children:[Object(S.jsx)(z,{children:"Action"}),Object(S.jsx)(T,{children:e=>{function t(){alert("id:".concat(e.id))}return Object(S.jsxs)("span",{children:[Object(S.jsx)("a",{onClick:t,children:" Edit "})," |"," ",Object(S.jsx)("a",{onClick:t,children:" Remove "})]})}})]})]})})}}var B=W,M=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={user:""},a}return Object(o.a)(n,[{key:"render",value:function(){return Object(S.jsxs)("div",{children:[Object(S.jsx)("div",{className:"incidentWidth",children:Object(S.jsx)("div",{children:Object(S.jsx)(N,{})})}),Object(S.jsx)("div",{className:"clientWidth",children:Object(S.jsx)(B,{})})]})}}]),n}(c.a.Component),J=n(62),E=n(239);var V=function(e){var t=e.component,n=e.authed,a=Object(E.a)(e,["component","authed"]);return console.log("user is logged in: "+n),Object(S.jsx)(u.b,Object(J.a)(Object(J.a)({},a),{},{render:function(e){return!0===n?Object(S.jsx)(t,Object(J.a)({},e)):Object(S.jsx)(u.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},K=n(96),Y=n(461),q=n(455),G=n(462),Z=n(459),U=n(460),Q=window.location.origin,X=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handle_change=function(e){var t=e.target.name,n=e.target.value;a.setState((function(e){var a=Object(J.a)({},e);return a[t]=n,console.log(a),a}))},a.handle_login=function(e,t){e.preventDefault(),fetch("".concat("https://api.incidentradar.com","/token-auth/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){void 0!==e.token&&localStorage.setItem("token",e.token),a.setState({username:e.user.username}),console.log("user: "+e.user.username),window.location.href="".concat(Q)})).catch((function(e){return e}))},a.state={username:"",password:""},a}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(S.jsxs)(Y.a,{fluid:!0,children:[Object(S.jsx)("div",{children:Object(S.jsx)("h4",{style:{color:"#2A3C47",top:"40px"},children:"Login"})}),Object(S.jsx)("br",{}),Object(S.jsxs)(q.a,{children:[Object(S.jsx)(G.a,{children:"Username"}),Object(S.jsx)(Z.a,{name:"username",onChange:function(t,n){e.handle_change(n)}})]}),Object(S.jsxs)(q.a,{children:[Object(S.jsx)(G.a,{children:"Password"}),Object(S.jsx)(Z.a,{name:"password",type:"password",onChange:function(t,n){e.handle_change(n)}})]}),Object(S.jsx)(q.a,{children:Object(S.jsxs)(g.a,{children:[Object(S.jsx)(b.a,{color:"blue",onClick:function(t){return e.handle_login(t,e.state)},children:"Login"}),Object(S.jsx)(b.a,{appearance:"default",disabled:!0,children:"Sign up"}),Object(S.jsx)(U.a,{tooltip:!0,children:"Sign up coming soon!"})]})})]})}}]),n}(c.a.Component),$=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={logged_in:"",url:"https://i.imgur.com/f59aONW.png"},a.handleLoginChange=a.handleLoginChange.bind(Object(K.a)(a)),a}return Object(o.a)(n,[{key:"handleLoginChange",value:function(e){this.setState({logged_in:e})}},{key:"render",value:function(){return Object(S.jsx)("div",{style:{backgroundImage:'url("https://i.imgur.com/f66MsTC.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100vw",height:"100vh"},children:Object(S.jsx)("div",{children:Object(S.jsxs)("div",{className:"loginExplainer",children:[Object(S.jsx)("div",{children:Object(S.jsx)("img",{className:"logo_home",src:"https://i.imgur.com/f59aONW.png",alt:"Logo Incidentradar"})}),Object(S.jsxs)("div",{className:"introbarStyle",children:[Object(S.jsxs)("div",{children:["Verzekeraar, projectontwikkelaar, buurtwacht of beveiliging? De Incidentradar helpt sneller en adequater te reageren op incidenten om zo negatieve effecten te verminderen en preventie te verbeteren."," "]}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{children:"Gebruik de Incidentradar om.. "}),Object(S.jsx)("div",{children:"1. .. automatisch gewaarschuwd te worden als er een incident plaatsvindt bij een van je gekozen locaties, waardoor je sneller kan reageren en eventuele schade kan beperken."}),Object(S.jsxs)("div",{children:["2. .. de eigen risicoanalyse te verdiepen met extra informatie."," "]}),Object(S.jsx)("div",{children:"3. .. locatie gerelateerde risico inzichten op basis van historische data te krijgen. (toekomst)"}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsxs)("div",{children:["De Incidentradar is op dit moment in Private Beta. Ge\xefnteresseerd in een demo? Stuur een bericht naar koen@cartha.io."," "]})]}),Object(S.jsxs)("div",{className:"loginHolder",children:[Object(S.jsx)("div",{}),Object(S.jsx)("div",{children:Object(S.jsx)(X,{handleLoginChange:this.handleLoginChange})})]})]})})})}}]),n}(c.a.Component),ee=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handle_logout=function(){localStorage.removeItem("token"),a.setState({logged_in:!1,username:""})},a.state={displayed_form:"",logged_in:!!localStorage.getItem("token"),username:""},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.logged_in&&fetch("".concat("https://api.incidentradar.com","/scraper/current_user/"),{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(t){e.setState({username:t.username}),e.setState({logged_in:!0})}))}},{key:"render",value:function(){return Object(S.jsx)(h.a,{children:Object(S.jsxs)("div",{children:[Object(S.jsxs)(j.a,{children:[Object(S.jsx)("div",{}),Object(S.jsx)("div",{className:"navbarStyle",children:Object(S.jsx)(g.a,{children:!0===this.state.logged_in&&Object(S.jsx)(b.a,{onClick:this.handle_logout,children:"Logout"})})})]}),Object(S.jsx)(V,{authed:this.state.logged_in,exact:!0,path:"/",component:R}),Object(S.jsx)(u.b,{handleLoginChange:this.handleLoginChange,path:"/login",component:$}),Object(S.jsx)(V,{authed:this.state.logged_in,exact:!0,path:"/dashboard",component:M})]})})}}]),n}(a.Component);s.a.render(Object(S.jsx)(ee,{}),document.getElementById("root"))}},[[450,1,2]]]);
//# sourceMappingURL=main.e490d9cb.chunk.js.map