(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{188:function(e,t,n){},372:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(46),i=n.n(r),o=(n(186),n(187),n(188),n(12)),s=n(13),l=n(15),d=n(14),h=n(108),u=n(10),g=n(385),j=n(384),b=n(179),p=n(66),m=n(31),O=n(19),v=n(28),f=n.n(v),x=n(54),C=n.n(x),k=n.p+"static/media/logo_regular.0709e572.png",y=n(378),S=n(180),w=n(380),R=n(3),I=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).sendSearchRangeChange=function(e){a.props.searchRangeChange(e)},a.sendDateRangeChange=function(e){a.props.dateRangeChange(e)},a.sendWordSearchChange=function(e){a.props.wordSearchChange(e)},a.sendIncludePoliceChange=function(e){a.props.includePoliceChange(e)},a.sendIncludeFireChange=function(e){a.props.includeFireChange(e)},a.sendIncludeAmbuChange=function(e){a.props.includeAmbuChange(e)},a.handleChange=function(e,t){a.props.handleChange(e,t)},a.handleFireChange=function(e){a.setState({checkboxFire:!a.state.checkboxFire}),a.sendIncludeFireChange(a.state.checkboxFire)},a.handlePolChange=function(e){a.setState({checkboxPol:!a.state.checkboxPol}),a.sendIncludePoliceChange(a.state.checkboxPol)},a.handleAmbuChange=function(e){a.setState({checkboxAmbu:!a.state.checkboxAmbu}),a.sendIncludeAmbuChange(a.state.checkboxAmbu)},a.state={checkboxFire:!0,checkboxPol:!0,checkboxAmbu:!0},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return Object(R.jsxs)("div",{children:["How big is the search area in km?",Object(R.jsx)(y.a,{progress:!0,min:.5,step:.5,max:20,defaultValue:1,onChange:function(t){console.log("radius "+t),e.sendSearchRangeChange(t),console.log(e.props.searchRanged)}}),Object(R.jsx)("br",{}),"Look back how many days?",Object(R.jsx)(y.a,{progress:!0,defaultValue:30,min:0,max:50,onChange:function(t){console.log("date range "+t),e.sendDateRangeChange(t),console.log(e.props.dateRanged)}}),Object(R.jsx)("br",{}),"Filter on other words/values",Object(R.jsx)(S.a,{placeholder:"ex. 'Brand'",onChange:function(t){e.sendWordSearchChange(t)}}),Object(R.jsx)("br",{}),Object(R.jsxs)(w.a,{checked:!!this.props.includeFire,onChange:this.handleFireChange,children:[" ","Brandweer"]}),Object(R.jsxs)(w.a,{checked:!!this.props.includePol,onChange:this.handlePolChange,children:[" ","Politie"]}),Object(R.jsxs)(w.a,{checked:!!this.props.includeAmbu,onChange:this.handleAmbuChange,children:[" ","Ambulance"]})]})}}]),n}(c.a.Component);C.a.accessToken="pk.eyJ1Ijoia2RlYnJhdXciLCJhIjoiY2p4ZnhyaTUzMDB1eTQxbnVwOG9jbHBwdSJ9.L5RCSfMVV7RYpq1a45E68g";var _=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){return function(t){a.setState(Object(m.a)(Object(m.a)({},a.state),{},Object(p.a)({},e,t.target.checked)))}},a.state={lng:5.8,lat:52,zoom:7,searchRange:1,dateRange:30,array:0,wordSearch:"",includeFire:!0,includePol:!0,includeAmbu:!0},a.handleDateRangeChange=a.handleDateRangeChange.bind(Object(O.a)(a)),a.handleSearchRangeChange=a.handleSearchRangeChange.bind(Object(O.a)(a)),a.handleWordSearchChange=a.handleWordSearchChange.bind(Object(O.a)(a)),a.handleIncludePoliceChange=a.handleIncludePoliceChange.bind(Object(O.a)(a)),a.handleIncludeFireChange=a.handleIncludeFireChange.bind(Object(O.a)(a)),a.handleIncludeAmbuChange=a.handleIncludeAmbuChange.bind(Object(O.a)(a)),a}return Object(s.a)(n,[{key:"handleDateRangeChange",value:function(e){this.setState({dateRange:e})}},{key:"handleSearchRangeChange",value:function(e){this.setState({searchRange:e})}},{key:"handleWordSearchChange",value:function(e){this.setState({wordSearch:e})}},{key:"handleIncludeFireChange",value:function(e){this.setState({includeFire:e}),console.log("fire new: "+e)}},{key:"handleIncludePoliceChange",value:function(e){this.setState({includePol:e}),console.log("police new: "+e)}},{key:"handleIncludeAmbuChange",value:function(e){this.setState({includeAmbu:e}),console.log("ambu new: "+e)}},{key:"componentDidMount",value:function(){var e=this,t=new C.a.Map({container:this.mapContainer,style:"mapbox://styles/kdebrauw/ckaxjbuh50ohl1ioo470azefc",center:[this.state.lng,this.state.lat],zoom:this.state.zoom});function n(e){for(var t={type:"FeatureCollection",features:[]},n=Object.keys(e).length,a=0;a<n;a++)t.features.push({type:"Feature",geometry:{type:"Point",coordinates:[e[a].fields.longitude,e[a].fields.latitude]},properties:{monitorcode:e[a].fields.monitorcode,comment:e[a].fields.comment,emergency_service:e[a].fields.emergency_service,priority_code:e[a].fields.priority_code,region:e[a].fields.region,pub_date:e[a].fields.pub_date}});return t}t.on("move",(function(){e.setState({lng:t.getCenter().lng.toFixed(4),lat:t.getCenter().lat.toFixed(4),zoom:t.getZoom().toFixed(2)})})),t.on("click",(function(c){var r=c.lngLat,i=r.lat,o=r.lng;new C.a.Popup({color:"#2A3C47"}).setLngLat(c.lngLat).setText("What happened here in the last "+e.state.dateRange+" days?").addTo(t),v.get("".concat("https://api.incidentradar.com","/scraper/api/location/"),{params:{dateRange:e.state.dateRange,"location-list":"SRID=4326;POINT(".concat(o," ").concat(i,")"),searchRange:e.state.searchRange,wordSearch:e.state.wordSearch,includePolice:e.state.includePol,includeFire:e.state.includeFire,includeAmbu:e.state.includeAmbu}}).then((function(c){e.results=c.data,console.log(n(c.data)),e.setState({array:e.results.length}),t.getSource("locaties")&&(t.removeLayer("locaties_waddan"),t.removeSource("locaties")),t.addSource("locaties",{type:"geojson",data:n(c.data)}),t.addLayer({id:"locaties_waddan",type:"circle",source:"locaties",paint:{"circle-radius":5,"circle-stroke-color":"#2A3C47","circle-stroke-width":1,"circle-color":["match",["get","emergency_service"],"ambu","#EFDC23","br","#D13620","pol","#2134BE","unknown","#3bb2d0","#3C3C3D"]}}),t.on("mouseenter","locaties_waddan",(function(e){t.getCanvas().style.cursor="pointer";var n=e.features[0].geometry.coordinates.slice(),c=e.features[0].properties.monitorcode,r=e.features[0].properties.comment,i=e.features[0].properties.emergency_service,o=e.features[0].properties.priority_code,s=e.features[0].properties.pub_date;console.log(c),a.setLngLat(n).setHTML("<H3> Incident </H3>"+s+"<br> <br> Prioriteit: "+o+"<br> Hulpdienst: "+i+"<br> <br> Bericht: "+r).addTo(t)})),t.on("mouseleave","locaties_waddan",(function(){t.getCanvas().style.cursor="",a.remove()}))}))}));var a=new C.a.Popup({closeButton:!1,closeOnClick:!1})}},{key:"render",value:function(){var e=this;return Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{}),Object(R.jsxs)("div",{className:"dataHolder",children:[Object(R.jsx)("div",{children:Object(R.jsx)("img",{className:"logo_home",src:k,alt:"Logo Incidentradar"})}),Object(R.jsx)("div",{className:"introbarStyle",children:Object(R.jsx)("div",{children:"Click on the map to explore recent incidents in an area. "})}),Object(R.jsx)("div",{className:"hline"}),Object(R.jsx)("div",{className:"filterStyle",children:Object(R.jsx)(I,{searchRanged:this.state.searchRange,dateRanged:this.state.dateRange,handleChange:this.handleChange,searchRangeChange:this.handleSearchRangeChange,dateRangeChange:this.handleDateRangeChange,wordSearchChange:this.handleWordSearchChange,includePoliceChange:this.handleIncludePoliceChange,includeFireChange:this.handleIncludeFireChange,includeAmbuChange:this.handleIncludeAmbuChange,includeFire:this.state.includeFire,includePol:this.state.includePol,includeAmbu:this.state.includeAmbu})}),Object(R.jsxs)("div",{className:"sidebarStyle",children:[Object(R.jsxs)("div",{children:["Longitude: ",this.state.lng," | Latitude: ",this.state.lat," | Zoom:"," ",this.state.zoom]}),Object(R.jsxs)("div",{children:[" Your click returned ",this.state.array," results "]})]}),Object(R.jsx)("div",{className:"carthaBar",children:Object(R.jsx)("div",{children:"Designed and powered by Cartha"})})]}),Object(R.jsx)("div",{ref:function(t){return e.mapContainer=t},className:"mapContainer"})]})}}]),n}(c.a.Component),P=n(49),A=n.n(P),F=n(69),L=n(377),N="https://api.incidentradar.com";f.a.interceptors.request.use((function(e){return console.log(e),e})),f.a.interceptors.response.use((function(e){return console.log(e),e}),(function(e){return Promise.reject(e)}));var D=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).renderRaise=e.renderRaise.bind(Object(O.a)(e)),e.state={user:"",hits:[]},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=Object(F.a)(A.a.mark((function e(){var t,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(N,"/scraper/api/incidentHits/"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}});case 2:t=e.sent,this.results=t.data,n=t.data,this.setState({hits:n});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderRaise",value:function(e){var t=e>0,n=e<0;return Object(R.jsxs)("span",{style:{paddingLeft:15,color:n?"red":"green"},children:[Object(R.jsx)("span",{children:t?"+":null}),Object(R.jsx)("span",{children:e})]})}},{key:"render",value:function(){return Object(R.jsx)("div",{className:"listStyle",children:Object(R.jsx)(L.a,{bordered:!0,hover:!0,children:this.state.hits.map((function(e){return Object(R.jsxs)(L.a.Item,{children:[e.monitorcode," ",Object(R.jsx)("br",{}),e.pub_date]},e.pub_date)}))})})}}]),n}(c.a.Component),z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={clients:[]},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=Object(F.a)(A.a.mark((function e(){var t,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(N,"/scraper/api/clientlocationlist"),{headers:{Authorization:"Token ".concat(localStorage.getItem("token"))}});case 2:t=e.sent,this.results=t.data,n=t.data,this.setState({clients:n}),console.log(n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(R.jsx)("div",{children:"will display clients"})}}]),n}(c.a.Component),T=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={user:""},a}return Object(s.a)(n,[{key:"render",value:function(){return Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"incidentWidth",children:Object(R.jsx)("div",{children:Object(R.jsx)(D,{})})}),Object(R.jsx)("div",{className:"clientWidth",children:Object(R.jsx)(z,{})})]})}}]),n}(c.a.Component),W=n(181);var B=function(e){var t=e.component,n=e.authed,a=Object(W.a)(e,["component","authed"]);return console.log("user is logged in: "+n),Object(R.jsx)(u.b,Object(m.a)(Object(m.a)({},a),{},{render:function(e){return!0===n?Object(R.jsx)(t,Object(m.a)({},e)):Object(R.jsx)(u.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},H=n(382),M=n(376),J=n(383),V=n(381),E=n(379),Y=window.location.origin,q=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handle_change=function(e){var t=e.target.name,n=e.target.value;a.setState((function(e){var a=Object(m.a)({},e);return a[t]=n,console.log(a),a}))},a.handle_login=function(e,t){e.preventDefault(),fetch("".concat("https://api.incidentradar.com","/token-auth/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){void 0!==e.token&&localStorage.setItem("token",e.token),a.setState({username:e.user.username}),console.log("user: "+e.user.username),window.location.href="".concat(Y)})).catch((function(e){return e}))},a.state={username:"",password:""},a}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return Object(R.jsxs)(H.a,{fluid:!0,children:[Object(R.jsx)("div",{children:Object(R.jsx)("h4",{style:{color:"#2A3C47",top:"40px"},children:"Login"})}),Object(R.jsx)("br",{}),Object(R.jsxs)(M.a,{children:[Object(R.jsx)(J.a,{children:"Username"}),Object(R.jsx)(V.a,{name:"username",onChange:function(t,n){e.handle_change(n)}})]}),Object(R.jsxs)(M.a,{children:[Object(R.jsx)(J.a,{children:"Password"}),Object(R.jsx)(V.a,{name:"password",type:"password",onChange:function(t,n){e.handle_change(n)}})]}),Object(R.jsx)(M.a,{children:Object(R.jsxs)(j.a,{children:[Object(R.jsx)(b.a,{color:"blue",onClick:function(t){return e.handle_login(t,e.state)},children:"Login"}),Object(R.jsx)(b.a,{appearance:"default",disabled:!0,children:"Sign up"}),Object(R.jsx)(E.a,{tooltip:!0,children:"Sign up coming soon!"})]})})]})}}]),n}(c.a.Component),G=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={logged_in:"",url:"https://i.imgur.com/f59aONW.png"},a.handleLoginChange=a.handleLoginChange.bind(Object(O.a)(a)),a}return Object(s.a)(n,[{key:"handleLoginChange",value:function(e){this.setState({logged_in:e})}},{key:"render",value:function(){return Object(R.jsx)("div",{style:{backgroundImage:'url("https://i.imgur.com/f66MsTC.png")',backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"100vw",height:"100vh"},children:Object(R.jsx)("div",{children:Object(R.jsxs)("div",{className:"loginExplainer",children:[Object(R.jsx)("div",{children:Object(R.jsx)("img",{className:"logo_home",src:"https://i.imgur.com/f59aONW.png",alt:"Logo Incidentradar"})}),Object(R.jsxs)("div",{className:"introbarStyle",children:[Object(R.jsxs)("div",{children:["Verzekeraar, projectontwikkelaar, buurtwacht of beveiliging? De Incidentradar helpt sneller en adequater te reageren op incidenten om zo negatieve effecten te verminderen en preventie te verbeteren."," "]}),Object(R.jsx)("br",{}),Object(R.jsx)("br",{}),Object(R.jsx)("div",{children:"Gebruik de Incidentradar om.. "}),Object(R.jsx)("div",{children:"1. .. automatisch gewaarschuwd te worden als er een incident plaatsvindt bij een van je gekozen locaties, waardoor je sneller kan reageren en eventuele schade kan beperken."}),Object(R.jsxs)("div",{children:["2. .. de eigen risicoanalyse te verdiepen met extra informatie."," "]}),Object(R.jsx)("div",{children:"3. .. locatie gerelateerde risico inzichten op basis van historische data te krijgen. (toekomst)"}),Object(R.jsx)("br",{}),Object(R.jsx)("br",{}),Object(R.jsx)("br",{}),Object(R.jsx)("br",{}),Object(R.jsx)("br",{}),Object(R.jsxs)("div",{children:["De Incidentradar is op dit moment in Private Beta. Ge\xefnteresseerd in een demo? Stuur een bericht naar koen@cartha.io."," "]})]}),Object(R.jsxs)("div",{className:"loginHolder",children:[Object(R.jsx)("div",{}),Object(R.jsx)("div",{children:Object(R.jsx)(q,{handleLoginChange:this.handleLoginChange})})]})]})})})}}]),n}(c.a.Component),Z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handle_logout=function(){localStorage.removeItem("token"),a.setState({logged_in:!1,username:""})},a.state={displayed_form:"",logged_in:!!localStorage.getItem("token"),username:""},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.state.logged_in&&fetch("".concat("https://api.incidentradar.com","/scraper/current_user/"),{headers:{Authorization:"JWT ".concat(localStorage.getItem("token"))}}).then((function(e){return e.json()})).then((function(t){e.setState({username:t.username}),e.setState({logged_in:!0})}))}},{key:"render",value:function(){return Object(R.jsx)(h.a,{children:Object(R.jsxs)("div",{children:[Object(R.jsxs)(g.a,{children:[Object(R.jsx)("div",{}),Object(R.jsx)("div",{className:"navbarStyle",children:Object(R.jsx)(j.a,{children:!0===this.state.logged_in&&Object(R.jsx)(b.a,{onClick:this.handle_logout,children:"Logout"})})})]}),Object(R.jsx)(B,{authed:this.state.logged_in,exact:!0,path:"/",component:_}),Object(R.jsx)(u.b,{handleLoginChange:this.handleLoginChange,path:"/login",component:G}),Object(R.jsx)(B,{authed:this.state.logged_in,exact:!0,path:"/dashboard",component:T})]})})}}]),n}(a.Component);i.a.render(Object(R.jsx)(Z,{}),document.getElementById("root"))}},[[372,1,2]]]);
//# sourceMappingURL=main.5a0317b9.chunk.js.map